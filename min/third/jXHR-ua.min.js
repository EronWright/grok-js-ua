// jXHR.js (JSON-P XHR)
// v0.1 (c) Kyle Simpson
// MIT License
// slightly modified by Matthew Taylor to run within GROKB
(function(a){var b=a.setTimeout,c=a.document,d=0;a.jXHR=function(){function i(){try{g.parentNode.removeChild(g)}catch(a){}}function j(){f=!1,e="",i(),g=null,m(0)}function k(a){try{h.onerror.call(h,a,e)}catch(b){throw new Error(a)}}function l(){if(this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded"||f)return;this.onload=this.onreadystatechange=null,f=!0,h.readyState!==4&&k("Script failed to load ["+e+"]."),i()}function m(a,b){b=b||[],h.readyState=a,typeof h.onreadystatechange=="function"&&h.onreadystatechange.apply(h,b)}var e,f,g,h=null;return h={onerror:null,onreadystatechange:null,readyState:0,open:function(b,c){j(),internal_callback="cb"+d++,function(b){a.jXHR[b]=function(){try{m.call(h,4,arguments)}catch(c){h.readyState=-1,k("Script failed to run ["+e+"].")}a.jXHR[b]=null}}(internal_callback),e=c.replace(/=\?/,"=jXHR."+internal_callback),m(1)},send:function(){b(function(){g=c.createElement("script"),g.setAttribute("type","text/javascript"),g.onload=g.onreadystatechange=function(){l.call(g)},g.setAttribute("src",e),c.getElementsByTagName("head")[0].appendChild(g)},0),m(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}},j(),h}})(window);